(()=>{var e={n:n=>{var o=n&&n.__esModule?()=>n.default:()=>n;return e.d(o,{a:o}),o},d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};(()=>{"use strict";e.r(n);const o=flarum.core.compat["forum/app"];var t=e.n(o);const a=flarum.core.compat["common/extend"],s=flarum.core.compat["forum/components/DiscussionComposer"];var r=e.n(s);const i=flarum.core.compat["forum/components/LogInModal"];var c=e.n(i);const d=flarum.core.compat["common/components/Button"];var u=e.n(d);const p=flarum.core.compat["forum/components/IndexPage"];var l=e.n(p);const f=flarum.core.compat["common/components/HeaderSecondary"];var v=e.n(f);const b=flarum.core.compat["common/components/HeaderPrimary"];var h=e.n(b);const y=flarum.core.compat["forum/components/Search"];var g=e.n(y);t().initializers.add("flarum-mobile-sidebar",(function(){var e=function(e,n){void 0===n&&(n=200);var o=t().forum.attribute("canStartDiscussion")||!t().session.user;e.add("newDiscussion",m(u(),{icon:"fas fa-edit",className:"Button Button--primary IndexPage-newDiscussion",itemClassName:"App-primaryControl",onclick:function(){return new Promise((function(e,n){return t().session.user?(t().composer.load(r(),{user:t().session.user}),t().composer.show(),t().drawer.isOpen()&&t().drawer.hide(),e(t().composer)):(t().modal.show(c()),n())})).catch((function(){}))},disabled:!o},t().translator.trans("core.forum.index."+(o?"start_discussion_button":"cannot_start_discussion_button"))),n)};(0,a.extend)(h().prototype,"items",(function(n){n.add("search",m(g(),{state:t().search}),30),e(n)})),(0,a.extend)(v().prototype,"items",(function(n){e(n,30)})),(0,a.extend)(l().prototype,"sidebarItems",(function(e){e.remove("newDiscussion")})),(0,a.extend)(l().prototype,"view",(function(e){var n=this;this.isOpen=function(){return document.getElementsByClassName("IndexPage-nav")[0].classList.contains("sideNavOpen")},this.show=function(){var e=this;document.getElementsByClassName("IndexPage-nav")[0].classList.add("sideNavOpen"),this.$backdrop=$("<div/>").addClass("drawer-backdrop fade").css("z-index","8888").appendTo("body").on("click",this.hide.bind(this)),requestAnimationFrame((function(){e.$backdrop.addClass("in")}))},this.hide=function(){var e;document.getElementsByClassName("IndexPage-nav")[0].classList.remove("sideNavOpen"),null==(e=this.$backdrop)||null==e.remove||e.remove()},document.getElementById("content").addEventListener("click",(function(e){n.isOpen()&&(e.preventDefault(),n.hide())})),$("#app-navigation").find(".sidebaricon").length<1&&($("#app-navigation").prepend('<div id="sidebaricon" class="sidebaricon"></div>'),document.getElementById("sidebaricon")&&m.mount(document.getElementById("sidebaricon"),{view:function(){return m(u(),{icon:"fas fa-stream",onclick:function(e){e.stopPropagation(),n.isOpen()?n.hide():n.show()}},"MENU")}}))}))}))})(),module.exports=n})();
//# sourceMappingURL=forum.js.map