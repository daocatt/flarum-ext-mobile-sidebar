(()=>{var e={n:o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return e.d(n,{a:n}),n},d:(o,n)=>{for(var t in n)e.o(n,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:n[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const n=flarum.core.compat["forum/app"];var t=e.n(n);const r=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/components/DiscussionComposer"];var s=e.n(a);const i=flarum.core.compat["forum/components/LogInModal"];var c=e.n(i);const d=flarum.core.compat["common/components/Button"];var u=e.n(d);const p=flarum.core.compat["forum/components/IndexPage"];var l=e.n(p);const f=flarum.core.compat["common/components/HeaderSecondary"];var v=e.n(f);const b=flarum.core.compat["common/components/HeaderPrimary"];var y=e.n(b);const h=flarum.core.compat["forum/components/Search"];var g=e.n(h);function O(e,o){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},O(e,o)}const w=flarum.core.compat["common/Component"];var P=function(e){function o(){return e.apply(this,arguments)||this}var n,r;r=e,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,O(n,r);var a=o.prototype;return a.oninit=function(o){var n=this;e.prototype.oninit.call(this,o),this.$backdrop=null,document.getElementById("content").addEventListener("click",(function(e){n.isOpen()&&(e.preventDefault(),n.hide())}))},a.backdrop=function(){this.$backdrop=$("<div/>").addClass("drawer-backdrop fade").css("z-index","8888").appendTo("body").on("click",this.hide.bind(this))},a.isOpen=function(){return document.getElementsByClassName("IndexPage-nav")[0].classList.contains("sideNavOpen")},a.show=function(){var e=this;document.getElementsByClassName("IndexPage-nav")[0].classList.add("sideNavOpen"),this.backdrop(),requestAnimationFrame((function(){e.$backdrop.addClass("in")}))},a.hide=function(){var e;document.getElementsByClassName("IndexPage-nav")[0].classList.remove("sideNavOpen"),null==(e=this.$backdrop)||null==e.remove||e.remove()},a.view=function(){var e=this;return t().current.matches(l())?u().component({icon:"fas fa-stream",id:"sidebarButton",onclick:function(o){o.stopPropagation(),e.isOpen()?e.hide():e.show()}},"MENU"):""},o}(e.n(w)());t().initializers.add("flarum-mobile-sidebar",(function(){var e=function(e,o){void 0===o&&(o=200);var n=t().forum.attribute("canStartDiscussion")||!t().session.user;e.add("newDiscussion",m(u(),{icon:"fas fa-edit",className:"Button Button--primary IndexPage-newDiscussion",itemClassName:"App-primaryControl",onclick:function(){return new Promise((function(e,o){return t().session.user?(t().composer.load(s(),{user:t().session.user}),t().composer.show(),t().drawer.isOpen()&&t().drawer.hide(),e(t().composer)):(t().modal.show(c()),o())})).catch((function(){}))},disabled:!n},t().translator.trans("core.forum.index."+(n?"start_discussion_button":"cannot_start_discussion_button"))),o)};(0,r.extend)(y().prototype,"items",(function(o){o.add("search",m(g(),{state:t().search}),30),e(o)})),(0,r.extend)(v().prototype,"items",(function(o){e(o,30)})),(0,r.extend)(l().prototype,"sidebarItems",(function(e){e.remove("newDiscussion")})),(0,r.extend)(l().prototype,"view",(function(e){$("#app-navigation").find(".sidebaricon").length<1&&($("#app-navigation").prepend('<div id="sidebaricon" class="sidebaricon"></div>'),document.getElementById("sidebaricon")&&m.mount(document.getElementById("sidebaricon"),{view:function(){return m(P,null)}}))}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map